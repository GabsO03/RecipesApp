<ng-template #divLoading>
    <div class="flex justify-center items-center mt-32">
        <svg fill="#ff460e" height="100px" width="100px" version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 468.871 468.871" xmlns:xlink="http://www.w3.org/1999/xlink" enable-background="new 0 0 468.871 468.871">
            <g>
            <path d="m467.244,186.322l-9.929-24.005c-5.267-12.742-15.877-22.577-28.705-27.085v-33.682c0-14.423-10.578-34.982-60.973-51.019-35.78-11.386-83.16-17.656-133.413-17.656s-97.633,6.271-133.413,17.656c-50.393,16.037-60.971,36.596-60.971,51.02v30.972h-18.498c-7.14,0-13.771,3.544-17.739,9.479-3.968,5.936-4.708,13.418-1.978,20.016l9.933,24.004c5.321,12.859 15.696,22.479 28.28,26.975v154.323c0,14.423 10.578,34.982 60.973,51.019 35.78,11.386 83.16,17.656 133.413,17.656s97.632-6.271 133.413-17.656c50.395-16.037 60.973-36.595 60.973-51.019v-151.505h18.917c7.142,0 13.774-3.543 17.741-9.477 3.968-5.935 4.706-13.418 1.976-12.016zm-360.367-116.732c33.872-10.779 79.098-16.715 127.348-16.715 48.25,0 93.476,5.936 127.348,16.715 21.699,6.905 47.038,19.418 47.038,31.96s-25.339,25.055-47.038,31.96c-33.872,10.779-79.098,16.715-127.348,16.715-48.25,0-93.477-5.936-127.348-16.715-21.699-6.905-47.038-19.418-47.038-31.96s25.339-25.055 47.038-31.96zm-76.837,108.785l-9.933-24.004c-0.067-0.163-0.273-0.66 0.124-1.255 0.397-0.594 0.935-0.594 1.112-0.594h18.497v38.12c-4.264-3.012-7.706-7.205-9.8-12.267zm331.533,220.906c-33.872,10.779-79.098,16.715-127.348,16.715-48.25,0-93.477-5.936-127.348-16.715-21.699-6.905-47.038-19.418-47.038-31.96v-151.506h34.025c5.523,0 10-4.477 10-10s-4.477-10-10-10h-34.024v-62.301c9.221,6.61 22.387,13.14 40.973,19.055 35.78,11.386 83.16,17.656 133.413,17.656s97.632-6.271 133.413-17.656c18.586-5.914 31.752-12.444 40.973-19.054v233.805c-0.001,12.542-25.34,25.056-47.039,31.961zm87.068-204.057c-0.396,0.592-0.936,0.592-1.113,0.592h-18.917v-38.384c4.492,3.062 8.099,7.391 10.222,12.528l9.931,24.009c0.067,0.163 0.274,0.662-0.123,1.255z"/>
            <path d="m205.279,111.551c5.523,0 10-4.477 10-10 0-10.447 8.5-18.946 18.946-18.946s18.946,8.499 18.946,18.946c0,5.523 4.477,10 10,10s10-4.477 10-10c0-21.475-17.471-38.946-38.946-38.946-21.475,0-38.946,17.471-38.946,38.946 0,5.522 4.477,10 10,10z"/>
            <animate attributeName="opacity" values="1;0.3;1" dur="1.5s" repeatCount="indefinite"/>
            <animate attributeName="transform" type="translate" values="0 0; 0 -5; 0 0" dur="1.5s" repeatCount="indefinite"/>
            </g>
        </svg>
        <svg width="60px" height="60px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M3 13.1111C3 20.2222 8.28889 22 10.9333 22C12.2874 22 14.2481 21.6432 16 20.6097M18.7207 18C19.5021 16.7537 20 15.152 20 13.1111C20 8.58427 17.1653 5.35127 14.6023 3.49767C13.4438 2.65985 12 3.58 12 5.00971V5.33334C12 6.7752 11.3938 9.40705 9.70932 10.5017C8.84932 11.0606 7.92052 10.2241 7.816 9.20382L7.73017 8.36598C7.6304 7.39197 6.63841 6.80069 5.85996 7.39454C5.18794 7.90718 4.50139 8.60486 3.96944 9.5" stroke="#ff460e" stroke-width="1.5" stroke-linecap="round">
                <animate attributeName="opacity" values="1;0.3;1" dur="1.5s" repeatCount="indefinite"/>
                <animate attributeName="transform" type="translate" values="0 0; 0 -5; 0 0" dur="1.5s" repeatCount="indefinite"/>
            </path>
            <path d="M8 18.4445C8 21.2889 10.4889 22 11.7333 22C12.8222 22 15 21.2889 15 18.4445C15 17.3435 14.4107 16.6002 13.8404 16.1713C13.4424 15.872 12.8828 16.1408 12.7459 16.6196C12.5675 17.2437 11.9228 17.636 11.5944 17.0759C11.2941 16.5638 11.2941 15.7957 11.2941 15.3334C11.2941 14.6968 10.6539 14.2847 10.1389 14.6589C9.10649 15.4091 8 16.6815 8 18.4445Z" stroke="#ff460e" stroke-width="1.5">
                <animate attributeName="opacity" values="1;0.5;1" dur="1.2s" repeatCount="indefinite"/>
                <animate attributeName="transform" type="translate" values="0 0; 0 -3; 0 0" dur="1.2s" repeatCount="indefinite"/>
            </path>
        </svg>
        <svg width="60px" height="60px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M3 13.1111C3 20.2222 8.28889 22 10.9333 22C12.2874 22 14.2481 21.6432 16 20.6097M18.7207 18C19.5021 16.7537 20 15.152 20 13.1111C20 8.58427 17.1653 5.35127 14.6023 3.49767C13.4438 2.65985 12 3.58 12 5.00971V5.33334C12 6.7752 11.3938 9.40705 9.70932 10.5017C8.84932 11.0606 7.92052 10.2241 7.816 9.20382L7.73017 8.36598C7.6304 7.39197 6.63841 6.80069 5.85996 7.39454C5.18794 7.90718 4.50139 8.60486 3.96944 9.5" stroke="#ff460e" stroke-width="1.5" stroke-linecap="round">
                <animate attributeName="opacity" values="1;0.3;1" dur="1.5s" repeatCount="indefinite"/>
                <animate attributeName="transform" type="translate" values="0 0; 0 -5; 0 0" dur="1.5s" repeatCount="indefinite"/>
            </path>
            <path d="M8 18.4445C8 21.2889 10.4889 22 11.7333 22C12.8222 22 15 21.2889 15 18.4445C15 17.3435 14.4107 16.6002 13.8404 16.1713C13.4424 15.872 12.8828 16.1408 12.7459 16.6196C12.5675 17.2437 11.9228 17.636 11.5944 17.0759C11.2941 16.5638 11.2941 15.7957 11.2941 15.3334C11.2941 14.6968 10.6539 14.2847 10.1389 14.6589C9.10649 15.4091 8 16.6815 8 18.4445Z" stroke="#ff460e" stroke-width="1.5">
                <animate attributeName="opacity" values="1;0.5;1" dur="1.2s" repeatCount="indefinite"/>
                <animate attributeName="transform" type="translate" values="0 0; 0 -3; 0 0" dur="1.2s" repeatCount="indefinite"/>
            </path>
        </svg>
        <svg width="60px" height="60px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M3 13.1111C3 20.2222 8.28889 22 10.9333 22C12.2874 22 14.2481 21.6432 16 20.6097M18.7207 18C19.5021 16.7537 20 15.152 20 13.1111C20 8.58427 17.1653 5.35127 14.6023 3.49767C13.4438 2.65985 12 3.58 12 5.00971V5.33334C12 6.7752 11.3938 9.40705 9.70932 10.5017C8.84932 11.0606 7.92052 10.2241 7.816 9.20382L7.73017 8.36598C7.6304 7.39197 6.63841 6.80069 5.85996 7.39454C5.18794 7.90718 4.50139 8.60486 3.96944 9.5" stroke="#ff460e" stroke-width="1.5" stroke-linecap="round">
                <animate attributeName="opacity" values="1;0.3;1" dur="1.5s" repeatCount="indefinite"/>
                <animate attributeName="transform" type="translate" values="0 0; 0 -5; 0 0" dur="1.5s" repeatCount="indefinite"/>
            </path>
            <path d="M8 18.4445C8 21.2889 10.4889 22 11.7333 22C12.8222 22 15 21.2889 15 18.4445C15 17.3435 14.4107 16.6002 13.8404 16.1713C13.4424 15.872 12.8828 16.1408 12.7459 16.6196C12.5675 17.2437 11.9228 17.636 11.5944 17.0759C11.2941 16.5638 11.2941 15.7957 11.2941 15.3334C11.2941 14.6968 10.6539 14.2847 10.1389 14.6589C9.10649 15.4091 8 16.6815 8 18.4445Z" stroke="#ff460e" stroke-width="1.5">
                <animate attributeName="opacity" values="1;0.5;1" dur="1.2s" repeatCount="indefinite"/>
                <animate attributeName="transform" type="translate" values="0 0; 0 -3; 0 0" dur="1.2s" repeatCount="indefinite"/>
            </path>
        </svg>
    </div>
</ng-template>

<div *ngIf="receta; else divLoading" class="px-2 rounded-3xl bg-[#fae9d3]">

    <div class="w-full px-4 py-6 flex flex-col md:flex-row">

        <div class="lg:w-1/3 md:w-1/2 sm:w-full overflow-hidden rounded-2xl relative">
            <div class="absolute top-0 left-0 right-0 p-2 flex justify-between items-center">
                <div class="px-5 pt-5 pb-3 bg-orange-600 rounded-full hover:cursor-pointer" (click)="goList()">
                    <mat-icon>arrow_back</mat-icon>
                </div>
                <div *ngIf="esAdmin" class="flex space-x-2">
                    <p class="px-5 pt-5 pb-3 bg-orange-600 rounded-full hover:cursor-pointer"
                    [routerLink]="['/recetas/edit', receta.id]">
                        <mat-icon>edit</mat-icon>
                    </p>
                    <button class="px-5 pt-5 pb-3 bg-orange-600 rounded-full hover:cursor-pointer"
                    (click)="onDeleteReceta()">
                        <mat-icon>delete</mat-icon>
                    </button>
                </div>
            </div>
            
            <img style="height: 70vh;" class="w-full object-cover" [src]="receta | recipeImage" [alt]="receta.name" mat-card-image />
        </div>
        

        <div class="lg:w-2/3 md:w-1/2 sm:w-full p-8 flex flex-col ">
            <div class="flex flex-col text-center md:text-left border-l-8 border-orange-600 pl-3 mb-5">
                <div class="flex justify-between items-center">
                    <h3 class="font-raleway text-4xl md:text-6xl mb-2">{{ receta.name }}</h3>
                </div>
                
                <h5 class="font-raleway text-lg md:text-2xl pl-1.5">{{ receta.description }}</h5>
            </div>
    
            <mat-divider></mat-divider>

            <!-- TODO ponerle checks a estos -->
            <div class="font-nunito mt-5 w-full">
                <h2 class="text-3xl mb-3">Ingredientes</h2>
                <ul class="grid grid-cols-1 lg:grid-cols-5 md:grid-cols-2 text-lg md:text-xl">
                    <li *ngFor="let ingredient of receta.ingredients"
                    class="list-disc ml-5 mb-2 text-left">
                        {{ ingredient | ingredientPipe | capitalizeWord }}
                    </li>
                </ul>
            </div>

            <div class="p-3 my-4 flex flex-row items-center justify-between border border-black rounded-lg w-full">
                <p class="flex items-center text-lg mr-8">
                    <mat-icon>timer</mat-icon><span class="pt-1 ml-1">{{ receta.time }}</span>
                </p>
                <p>
                    <span *ngFor="let tag of receta.tags"
                    class="px-2 py-1 mr-3 rounded-xl bg-orange-900 font-montserrat text-md text-white">
                        {{ tag | capitalizeWord }}
                    </span>
                </p>
            </div>

            <div class="font-nunito w-full flex flex-col rounded-3xl">
                <h2 class="text-2xl lg:text-3xl mb-3">Instrucciones</h2>
                <ul>
                    <li *ngFor="let instruction of receta.instructions"
                    class="list-decimal ml-5 mb-1 text-lg lg:text-xl">
                        {{ instruction | capitalizeWord }}
                    </li>
                </ul>
            </div>

        </div>
    </div>
</div>